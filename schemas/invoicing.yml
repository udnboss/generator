api:
  title: Invoicing API
  description: Invoicing API Reference
  version: '1.0'
  prefix: /api/v1
scripts:
  outputDir: ./output/invoicing
  framework: express #express|webapi|fastapi
interfaces:
  account:
    key: id
    unique: [label]
    properties:
      id: 
      label: 
      bank_name: 
      bank_address: 
      bank_swift: 
      account_name: 
      account_iban: 
      account_address: 

  category:
    key: id
    unique: [name]
    properties:
      id: 
      name: 
      category_id?: str > category.id

      category?: category
      items?: item[]

  company:
    key: id
    unique: [name]
    properties:
      id: 
      name: 
      address: 
      crn: 
      trn: 
      contact: 
      mobile: 
      email: str|email

  currency:
    key: id
    unique: [name]
    properties:
      id: 
      name: 
      symbol: 

  customer:
    key: id
    unique: [name]
    properties:
      id: 
      name: 
      address?: 
      contact?: 
      currency_id?: str > currency.id
      currency?: currency
      payment_term?: int

      sales?: sale[]

  item:
    key: id
    unique: [name]
    properties:
      id: 
      name: 
      category_id?: str > category.id

      category?: category

  sale:
    key: id
    unique: [number]
    sort: [number: desc]
    properties:
      id: uuid
      company_id: str > company.id
      account_id: str > account.id
      customer_id: str > customer.id
      place?: 
      number: int
      date*: date # a * means disallow update
      currency_id: str > currency.id
      total!*: float # a !* means disallow both create, update
      reference?:     
      confirmed: bool

      reference_date?: date
      due_date?: date

      currency?: currency
      customer?: customer
      account?: account
      company?: company
      items?: saleItem[]

  saleItem:
    key: id
    unique: [sale_id, item_id]
    properties:
      id: 
      sale_id: str > sale.id
      item_id: str > item.id
      description: 
      quantity: int
      price: float    
      
      sale?: sale
      item?: item